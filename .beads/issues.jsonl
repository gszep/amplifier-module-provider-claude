{"id":"amplifier-module-provider-claude-1of","title":"Claude shows initial confusion about tool calling format","description":"When Claude first receives a request with tools, the thinking output shows confusion about the tool calling format:\n\n**Observed behavior:**\n- Claude's thinking shows: 'Oops, I need to use the correct tool name' and 'I need to use the JSON format in tool_use blocks'\n- Takes extra thinking cycles to figure out the correct format\n- Eventually works, but wastes tokens on format discovery\n\n**Root cause:**\nThe tool instructions in `_build_tool_instructions()` (line 712):\n1. Use generic example (`tool_name`, `param1`) instead of a real tool\n2. Don't explicitly state this is the ONLY format (vs function calling Claude may know)\n3. Put format instructions after the tool list, not before\n\n**Proposed fix:**\n1. Put format instructions FIRST, before the tool list\n2. Add explicit note: 'Do NOT use function calling or any other format'\n3. Show a concrete example using an actual tool from the list\n4. Make the format instruction more prominent","notes":"Fix verified working in real-world test.\n\nTest: 'Read the file /etc/hosts and tell me what's in it'\n\nBefore fix - Claude's thinking showed:\n- 'Oops, I need to use the correct tool name'\n- 'I need to use the JSON format in tool_use blocks'\n\nAfter fix - Claude's thinking shows:\n- 'I've made the tool call to read /etc/hosts. Now I'll wait for the result...'\n\nNo confusion about tool format - immediate correct tool call.","status":"closed","priority":2,"issue_type":"bug","owner":"steffen.plunder@web.de","created_at":"2026-01-24T14:39:16.104486+09:00","created_by":"SteffenPL","updated_at":"2026-01-24T14:44:40.499458+09:00","closed_at":"2026-01-24T14:44:40.49946+09:00"}
